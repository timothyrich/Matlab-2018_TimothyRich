function [filename, status] = ...    EXAskFilename(prompt,defaultname,suffix,maxlength)% [filename, status] = EXAskFilename(prompt,defaultname,suffix,maxlength);% Uses a dialog box to prompt user for a file name.% Strict error checking on file names.% Returns filename and status flag (0 for good, 1 for bad).% 11/18/05	jp simplfied version of EXGetFilenames% 10/29/06	jp rewrote to remove aborts and eyelink file% 4/28/12	jp created LOAskFilename% 2/14/18   jp renamed EXAskFilename and added to EX routines% 2/27/18   redid warnings, simplfied definition at end (no filepath)% get main file name[shortfilename, filepath] = uiputfile(defaultname, prompt);	cd(filepath);								% update current pathstatus = 0;									% assume good, then check% check if emptyif isempty(shortfilename) || isequal(shortfilename, 0),	% empty?, bad exit	warning('EXAskFilename:missingname', 'Missing file name');	status = 1;end;	% check if filename has proper suffix in it (probably not necessary)place = strfind(shortfilename,suffix);		if isempty(place)							% if bad suffix, bad status	warning('EXAskFilename:missingsuffix', 'Required suffix missing.');	status = 1;end;% check if filename has single "." in it (probably not necessary)place = strfind(shortfilename,'.');		if length(place) > 1						% if bad suffix, bad status	warning('EXAskFilename:extradots', 'Multiple dots in name.');	status = 1;end;% Check length of file nameif length(shortfilename(1:(place-1))) > maxlength;	% if long, bad status 	warning('EXAskFilename:nametolong','File name too long.');	status = 1;end;filename = shortfilename;                   % make full filename